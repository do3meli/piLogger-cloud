{% extends "_layout.html" %}

{% block div %}
<div class="row">
   <div class="col-lg-12">
      <h1 class="page-header">Graph {{ graph.name }}</h1>
   </div>
</div>


<div class="row">
   <div class="col-lg-12">
      <div class="panel panel-default">
         <div class="panel-heading">Graph data for the last {{ graph.since }} hours</div>
         <div class="panel-body"><div id="{{ graph.name }}"></div></div>
      </div>
   </div>
</div>

<div class="row">
   <div class="col-lg-6">
      <div class="panel panel-default">
         <div class="panel-heading">Device and Sensor information for {{ graph.name }}</div>
         <div class="panel-body">
            <div class="table-responsive">  
               <table class="table table-condensed table-hover"> 
                  <thead>
                     <tr>
                        <th>Sensor</th>
                        <th>Attached to</th>
                     </tr>
                  </thead>
                  <tbody>
                     {% for item in infos %}
                     <tr>
                        <td><a href="/sensors/{{ item.sid }}">{{ item.sensorName }}</a></td>
                        <td><a href="/devices/{{ item.did }}">{{ item.deviceName }}</a></td>
                     </tr>
                     {% endfor %}
                  </tbody>
               </table>
            </div> 
         </div>
      </div>
   </div>
</div>

{% endblock %}

{% block myjavascript %}
      <script src="../js/piCloudGraphs.js" type="text/javascript"></script>
      <script type="text/javascript"> generateGraph('{{ graph.name }}'); </script>
{% endblock %}
